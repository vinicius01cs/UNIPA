<body>
    <div class="container text-center customForm">
        <h2>Relatorio Especifico</h2>
        <h3>Disciplina - {{disciplina.nome}}</h3>
        <div class="container-lg div_card_expandido text-center">
            <label>Média da Disciplina</label>
            <button id="toggleButton">Expandir</button>
            <div id="expandableDiv" class="expandable">
                <ul class="list-group">
                    {{#each dadosRelatorios.perguntasQuestionario}}
                    <li class="list-group-item active">
                        <label>Pergunta</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_01}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_02}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_03}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_04}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_05}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_06}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_07}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{pergunta_08}}</label>
                    </li>
                    {{/each}}
                </ul>
                <ul class="list-group">
                    {{#each dadosRelatorios.mediaPorPerguntaDisciplina}}
                    <li class="list-group-item active">
                        <label>Nota média</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta01}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta02}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta03}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta04}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta05}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta06}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta07}}</label>
                    </li>
                    <li class="list-group-item">
                        <label>{{mResposta08}}</label>
                    </li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <div class="container container-info" style="margin-top: 30px">
            <h2>Sugestões de IA</h2>
            <a id=" linkIa" href="#" class="btn btn-primary" onclick="enviarObjeto()">Sugestões de IA</a>
            <div class="row" style="padding-top: 10px;">
                <label id="resultado"></label>
            </div>
        </div>
    </div>
</body>
<script>
    document.getElementById("toggleButton").addEventListener("click", function () {
        var div = document.getElementById("expandableDiv");
        if (div.classList.contains("expanded")) {
            div.classList.remove("expanded");
            this.textContent = "Expandir";
        } else {
            div.classList.add("expanded");
            this.textContent = "Recolher";
        }
    });

    function enviarObjeto() {
        const dadosRelatorios = {
            mediaAlunosDisciplina: '{{{json dadosRelatorios.mediaAlunosDisciplina}}}',
            mediaAlunosCurso: '{{{json dadosRelatorios.mediaAlunosCurso}}}',
            perguntasaQuestionario: '{{{json dadosRelatorios.perguntasQuestionario}}}',
            mediaPorPerguntaDisciplina: '{{{json dadosRelatorios.mediaPorPerguntaDisciplina}}}'
        }

        fetch('/relatorio/indexCpa/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(dadosRelatorios),
        })
            .then(response => response.json())
            .then(data => {
                const resultadoDiv = document.getElementById('resultado');
                resultadoDiv.innerHTML = data.retornoPrompt.replace(/\n/g, '<br>');
            }).catch((error) => {
                console.error('Error:', error);
            });
    }
</script>